
:branch: develop

== dockmoor
image:https://img.shields.io/circleci/project/github/MeneDev/dockmoor/{branch}.svg[Build Status (Circle CI), link=https://circleci.com/gh/MeneDev/dockmoor]
image:https://img.shields.io/coveralls/github/MeneDev/dockmoor/{branch}.svg[Coveralls statement coverage, link=https://coveralls.io/github/MeneDev/dockmoor]
image:https://img.shields.io/twitter/follow/MeneDev.svg?style=social&label=%40MeneDev[Follow @MeneDev on Twitter, link=https://twitter.com/MeneDev]

Manage docker image references.

[[_examples]]
Examples
--------

[[contains-command-examples]]
contains command
~~~~~~~~~~~~~~~~

[[_use_unix_find_to_list_all_files_containing_unpinned_references]]
Use unix find to list all files containing unpinned references
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

[source,bash]
----
find some-folder/ -type f -exec dockmoor contains --unpinned {} \; -print
----

stdout:

_____________________________________________
....
some-folder/Dockerfile-nginx-latest
some-folder/subfolder/Dockerfile-nginx-latest
some-folder/Dockerfile-nginx-untagged
some-folder/Dockerfile-nginx-1.15.3
....
_____________________________________________

stderr is empty +
exit code: 0

[[_use_unix_find_to_list_all_files_containing_latestno_tags]]
Use unix find to list all files containing latest/no tags
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

[source,bash]
----
find some-folder/ -type f -exec dockmoor contains --latest {} \; -print
----

stdout:

_____________________________________________
....
some-folder/Dockerfile-nginx-latest
some-folder/subfolder/Dockerfile-nginx-latest
some-folder/Dockerfile-nginx-untagged
....
_____________________________________________

stderr is empty +
exit code: 0

[[_use_unix_find_to_list_all_supported_files]]
Use unix find to list all supported files
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

[source,bash]
----
find some-folder/ -type f -exec dockmoor contains --any {} \; -print
----

stdout:

_____________________________________________
....
some-folder/Dockerfile-nginx-digest
some-folder/Dockerfile-nginx-tagged-digest
some-folder/Dockerfile-nginx-latest
some-folder/subfolder/Dockerfile-nginx-latest
some-folder/Dockerfile-nginx-untagged
some-folder/Dockerfile-nginx-1.15.3
....
_____________________________________________

stderr is empty +
exit code: 0

[[_test_the_format_of_a_file]]
Test the format of a file
^^^^^^^^^^^^^^^^^^^^^^^^^

The `contains` command returns with exit code 0 when an image reference was found that matches. Using the `--any` predicate allows to match any file with a supported format that contains at least one image reference.

[source,bash]
----
dockmoor contains --any some-folder/Dockerfile-nginx-latest
----

stdout is empty +
stderr is empty +
exit code: 0

[source,bash]
----
dockmoor contains --any some-folder/NotADockerfile
----

stdout is empty +
stderr is empty +
exit code: 4

[[_supported_formats]]
Supported Formats
-----------------

* Dockerfile (as used by `docker build`)

Unresolved directive in _readme.adoc - include::dockmoor.adoc[]

